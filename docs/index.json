[{"content":"","date":"December 16 2022","permalink":"/tags/apps/","section":"Tags","summary":"","title":"apps"},{"content":" All the app docker containers that are currently configured for LochNAS. Request a custom container\n","date":"December 16 2022","permalink":"/apps/","section":"Apps","summary":"All the app docker containers that are currently configured for LochNAS. Request a custom container","title":"Apps"},{"content":"","date":"December 16 2022","permalink":"/tags/docs/","section":"Tags","summary":"","title":"docs"},{"content":" Install LochNAS A server daemon that manages a collection of catered docker containers and allows users to get started with very little effort.\nFeatures include\u003e Features include # Notifications nginx management Container volumes premapped Smart ddns updates SSL renewal cron built in Small footprint daemon written in go auto container updates In the works\u003e In the works # Plugin USB backups More notification providers Raid monitor Disk health monitoring Dashboard home page License\u003e License # This project is licensed under the GPLv3 License - see the LICENSE file for details\nAcknowledgments\u003e Acknowledgments # Creators of the docker containers listed in the compose files. Anthony Page who\u0026rsquo;s ongoing financial contributions supported the development of Docker-Nas which is now LochNAS. Maave and Bana0615 development contributions. ","date":"December 16 2022","permalink":"/","section":"LochNAS","summary":"Install LochNAS A server daemon that manages a collection of catered docker containers and allows users to get started with very little effort.\nFeatures include\u003e Features include # Notifications nginx management Container volumes premapped Smart ddns updates SSL renewal cron built in Small footprint daemon written in go auto container updates In the works\u003e In the works # Plugin USB backups More notification providers Raid monitor Disk health monitoring Dashboard home page License\u003e License # This project is licensed under the GPLv3 License - see the LICENSE file for details","title":"LochNAS"},{"content":"","date":"December 16 2022","permalink":"/tags/shinobi/","section":"Tags","summary":"","title":"shinobi"},{"content":"Details\u003e Details # This template adds Shinobi, a network video recorder (NVR) for viewing and recording IP cameras.\nOriginal maintainer MiGoller\u0026rsquo;s ShinobiDocker, mariadb\nHow to enable\u003e How to enable # Add the domain to get SSL, replacing \u0026ldquo;domain.com\u0026rdquo; with the root domain (configured in config.yml)\n/lochnas/server.bin -domain add shinobi.{domain.com} Copy /lochnas/docker-templates/shinobi/.example.env to /lochnas/docker-templates/shinobi/.env. Edit /lochnas/docker-templates/shinobi/.env\nSet SHINOBI_ENABLED=TRUE. Fill in the passwords with random and keep note of ADMIN_USER and ADMIN_PASSWORD. These values will be set on initial setup.\nan example .env:\nSHINOBI_ENABLED=true # Shinobi settings # used for shinobi.domain.com/super ADMIN_USER=admin@domain.com ADMIN_PASSWORD=blahblahblah123456789 #I haven\u0026#39;t tried these yet. Check MiGoller\u0026#39;s docs #CRON_KEY=b59b5c62-57d0-4cd1-b068-a55e5222786f #PLUGINKEY_MOTION=49ad732d-1a4f-4931-8ab8-d74ff56dac57 #PLUGINKEY_OPENCV=6aa3487d-c613-457e-bba2-1deca10b7f5d #PLUGINKEY_OPENALPR=SomeOpenALPRkeySoPeopleDontMessWithYourShinobi #MOTION_HOST=localhost #MOTION_PORT=80 # DB settings # these value are used in initial setup and will persist in /lochnas/docker-data/shinobi/database MYSQL_USER=shinobi MYSQL_PASSWORD=blahblahblah1234567890 # Shinobi will use MYSQL_HOST to call the database. Set the database\u0026#39;s container name to the same in docker-compose.yml MYSQL_HOST=shinobi-db MYSQL_DATABASE=ccio MYSQL_ROOT_PASSWORD=blahblahblah1234567890 MYSQL_ROOT_USER=root Finally run: service lochnas restart. Shinobi should be running now.\nCheck your logs with journalctl -u lochnas.service (and hit Shift+G to jump to the end). Run docker ps -a to ensure the Docker images shinobi and shinobi-db are running:\nSetup Shinobi\u003e Setup Shinobi # Navigate in a browser to shinobi.domain.com/super. Log in using the credentials you set in .env (ADMIN_USER and ADMIN_PASSWORD). Add an account on the Accounts tab, and save it to your password manager.\nNavigate in a browser to shinobi.domain.com. Log in using the account you just made.\nShinobi is running now! Read the Shinobi docs to continue.\n","date":"December 16 2022","permalink":"/apps/shinobi/","section":"Apps","summary":"Details\u003e Details # This template adds Shinobi, a network video recorder (NVR) for viewing and recording IP cameras.\nOriginal maintainer MiGoller\u0026rsquo;s ShinobiDocker, mariadb\nHow to enable\u003e How to enable # Add the domain to get SSL, replacing \u0026ldquo;domain.","title":"Shinobi"},{"content":"","date":"December 16 2022","permalink":"/tags/","section":"Tags","summary":"","title":"Tags"},{"content":"","date":"November 30 2022","permalink":"/tags/debian/","section":"Tags","summary":"","title":"debian"},{"content":"","date":"November 30 2022","permalink":"/tags/docker/","section":"Tags","summary":"","title":"docker"},{"content":"Documentation for LochNAS daemon and setup\n","date":"November 30 2022","permalink":"/docs/","section":"Docs","summary":"Documentation for LochNAS daemon and setup","title":"Docs"},{"content":"","date":"November 30 2022","permalink":"/tags/http/","section":"Tags","summary":"","title":"http"},{"content":"","date":"November 30 2022","permalink":"/tags/install/","section":"Tags","summary":"","title":"install"},{"content":"","date":"November 30 2022","permalink":"/tags/linux/","section":"Tags","summary":"","title":"linux"},{"content":"Requirements\u003e Requirements # Ubuntu 20 server or greater is the preffered setup used for this system. root user access Port forwarding 80 + 443 Static IP on Server, alternative is DHCP reservation on router. Windows Guide - Untested OSX Guide - Untested Install\u003e Install # Run the following command below\nsudo curl -fsSL https://raw.githubusercontent.com/SiloCityLabs/lochnas/v3/install.sh -o install.sh \u0026amp;\u0026amp; sudo sh install.sh Edit your config.yml then restart service lochnas restart. If you are running your setup on a residential isp we recommend following our ddns guide.\nUpdates\u003e Updates # LochNAS uses git to update. You can configure your update schedule via the config.yml file.\nCommands\u003e Commands # server.bin -daemon start - Start in background stop - Stop background restart - restart in background install - Install as service uninstall - Uninstall service server.bin -ddns ip - Grab current wanip from router refresh - update ddns if ip changed force - Force update ddns ip server.bin -domain renew - Renew all domains add - Renew all domains, expects domain as argument delete - Renew all domains server.bin -apps update - Update server.bin -server notify - Send test notifications server.bin -config /path/to/alt/config Create users and groups (optional)\u003e Create users and groups (optional) # This portion is handled by the containers but in some instances file permissions may have changed. We will be using the www-data user to share permissions between services. You can make seperate users and groups if you would like to but I found that this is the easiest way to manage access accross the board.\nYou can give your user access to any files of www-data with this command.\nusermod -aG www-data yourusername If you need to access the local folder mounted in the compose file at /lochnas/home from nextcloud local storage plugin, you can run the following set of commands on a folder to grant permission:\nchown -R www-data:www-data /lochnas/home chmod -R 770 /lochnas/home Apps\u003e Apps # Each app has its own .env to enable in /lochnas/docker-templates/{appname}/.env. See app docs for more information to get started. We recommend activating nginx first.\nHint, to see dot files in a folder you need to use ls -a command.\n","date":"November 30 2022","permalink":"/docs/install/","section":"Docs","summary":"Requirements\u003e Requirements # Ubuntu 20 server or greater is the preffered setup used for this system. root user access Port forwarding 80 + 443 Static IP on Server, alternative is DHCP reservation on router.","title":"LochNAS Setup"},{"content":"","date":"November 30 2022","permalink":"/tags/nginx/","section":"Tags","summary":"","title":"nginx"},{"content":"Details\u003e Details # This container allows you to server all your containers trhough port 443 via ssl with only a single port forward set in your router.\nHow to enable\u003e How to enable # Edit your /lochnas/docker-templates/nginx/.env file and enable this container with NGINX_ENABLED=true and other variables.\nIt is recommended you set a password for auth enabled applications to use by uncommenting the following two options in the nginx .env file.\nNGINX_PASSWORD={password} NGINX_USERNAME=admin SSL Certificates\u003e SSL Certificates # Add a domain ssl\u003e Add a domain ssl # You need to use the domain argument to create SSL certificates for your nginx setup. This is highly recommended and uses Let\u0026rsquo;s Encrypt for a valid certificate for free. Create your first root domain here for nginx to use as the default. Each app may need its own domain specified in its docs.\n/lochnas/server.bin -domain add domain.com Delete a domain ssl\u003e Delete a domain ssl # /lochnas/server.bin -domain remove Renew domain ssl\u0026rsquo;s\u003e Renew domain ssl\u0026rsquo;s # This happens automatically but you can manually trigger it with the following command.\n/lochnas/server.bin -domain renew ","date":"November 30 2022","permalink":"/apps/nginx/","section":"Apps","summary":"Details\u003e Details # This container allows you to server all your containers trhough port 443 via ssl with only a single port forward set in your router.\nHow to enable\u003e How to enable # Edit your /lochnas/docker-templates/nginx/.","title":"Nginx"},{"content":"","date":"November 30 2022","permalink":"/tags/proxy/","section":"Tags","summary":"","title":"proxy"},{"content":"","date":"November 30 2022","permalink":"/tags/prune/","section":"Tags","summary":"","title":"prune"},{"content":"Sometimes an app has an update and the old image retains remnants of files it should no longer have. If you find yourself having an issue that no one else can replicate you can try prunning your images and restarting lochnas so that the images rebuild. This will have no effect on your persistent data.\nservice lochnas stop docker rm -f $(docker ps -a -q) docker image prune -f docker network prune -f docker volume prune -f service lochnas start ","date":"November 30 2022","permalink":"/docs/prune-all/","section":"Docs","summary":"Sometimes an app has an update and the old image retains remnants of files it should no longer have. If you find yourself having an issue that no one else can replicate you can try prunning your images and restarting lochnas so that the images rebuild.","title":"Prune all images"},{"content":"","date":"November 30 2022","permalink":"/tags/setup/","section":"Tags","summary":"","title":"setup"},{"content":"","date":"November 30 2022","permalink":"/tags/troubleshooting/","section":"Tags","summary":"","title":"troubleshooting"},{"content":"","date":"November 30 2022","permalink":"/tags/ubuntu/","section":"Tags","summary":"","title":"ubuntu"},{"content":"","date":"November 29 2022","permalink":"/tags/ark/","section":"Tags","summary":"","title":"ark"},{"content":"Details\u003e Details # Details\u003e Details # This is a template to add this container to your nas setup full functional with matching permissions and settings that of lochnas repo.\nOriginal container turzam/ark\nHow to enable\u003e How to enable # Edit your /lochnas/docker-templates/ark/.env file and enable this container with ARK_ENABLED=true.\nAdditional Configuration\u003e Additional Configuration # See additional config in .env\nAdditional variables available here\n","date":"November 29 2022","permalink":"/apps/ark/","section":"Apps","summary":"Details\u003e Details # Details\u003e Details # This is a template to add this container to your nas setup full functional with matching permissions and settings that of lochnas repo.\nOriginal container turzam/ark","title":"Ark Server"},{"content":"","date":"November 29 2022","permalink":"/tags/collabora/","section":"Tags","summary":"","title":"collabora"},{"content":"Details\u003e Details # This is a template to add this container to your nas setup full functional with matching permissions and settings that of lochnas repo.\nOriginal container collabora/code\nHow to enable\u003e How to enable # Add the domain ssl replacing domain.com with the root domain you entered in your config.yml\n/lochnas/server.bin -domain add office.{domain.com} Edit your /lochnas/docker-templates/collabora/.env file and enable this container with COLLABORA_ENABLED=true.\nAdditional Configuration\u003e Additional Configuration # You can try it in 5 minutes with Nextcloud following these basic steps:\nIn your browser go to https://cloud.yourdomain.com and set up your Nextcloud. In Nextcloud go to Apps – Office and Text, and install Nextcloud Office app. In Nextcloud go to Settings -\u0026gt; Administration -\u0026gt; Office Select \u0026ldquo;Use your own server\u0026rdquo; and type in https://office.yourdomain.com ","date":"November 29 2022","permalink":"/apps/collabora/","section":"Apps","summary":"Details\u003e Details # This is a template to add this container to your nas setup full functional with matching permissions and settings that of lochnas repo.\nOriginal container collabora/code\nHow to enable\u003e How to enable # Add the domain ssl replacing domain.","title":"Collabora"},{"content":"","date":"November 29 2022","permalink":"/tags/dashboard/","section":"Tags","summary":"","title":"dashboard"},{"content":"","date":"November 29 2022","permalink":"/tags/ddns/","section":"Tags","summary":"","title":"ddns"},{"content":"You need your domain name to point to your IP address. This is done by visiting an \u0026ldquo;Update URL\u0026rdquo; (sometimes \u0026ldquo;Dynamic URL\u0026rdquo;). Go to your domain provider\u0026rsquo;s website and find the URL for your domain. The random value at the end is your secret API key. It is recommended you use two ddns urls one for a wildcard and the other for the root domain. Do not share it and do not save it in git.\nExample update URLs:\nsomesite.com - https://ipv4.cloudns.net/api/dynamicURL/?q=abcdefghijklmnopqrstuvwxyz1234567890987654321zyxwvutsrqponmlkjihgfedcba *.somesite.com - https://ipv4.cloudns.net/api/dynamicURL/?q=abcdefghijklmnopqrstuvwxyz1234567890987654321zyxwvutsrqponmlkji5f3434fd Edit config.yml. Go to the ddns section, change enabled to true, and add your update URL. Ignore the IP value - LochNAS will populate it automatically.\nddns: ip: 0.0.0.0 enabled: true url: - https://ipv4.cloudns.net/api/dynamicURL/?q=abcdefghijklmnopqrstuvwxyz1234567890987654321zyxwvutsrqponmlkjihgfedcba - https://ipv4.cloudns.net/api/dynamicURL/?q=abcdefghijklmnopqrstuvwxyz1234567890987654321zyxwvutsrqponmlkji5f3434fd notification: enabled: false service: telegram Then run\nservice lochnas restart Done! LochNAS will automatically update your DDNS every few minutes.\nAlternative #1: cron\u003e Alternative #1: cron # You can use cron to update the DDNS. Edit the crontab file with crontab -e. Add a command that visits your Update URL like this:\n0 6 * * * wget --output-document=/dev/null --quiet \u0026#39;https://dnsprovider.com/updateurl?key=somekey\u0026#39; 0 6 * * * wget --output-document=/dev/null --quiet \u0026#39;https://dnsprovider.com/updateurl?key=somekey2\u0026#39; Alternative #2: Docker (figure it out)\u003e Alternative #2: Docker (figure it out) # If your DNS provider doesn\u0026rsquo;t provide Update URLs then I recommend searching the Docker repository for a DDNS updater. Add the Docker image using Portainer or make your own docker-templates folder for a custom app. We can\u0026rsquo;t help you much here.\n","date":"November 29 2022","permalink":"/docs/ddns/","section":"Docs","summary":"You need your domain name to point to your IP address. This is done by visiting an \u0026ldquo;Update URL\u0026rdquo; (sometimes \u0026ldquo;Dynamic URL\u0026rdquo;). Go to your domain provider\u0026rsquo;s website and find the URL for your domain.","title":"DDNS setup"},{"content":"","date":"November 29 2022","permalink":"/tags/dns/","section":"Tags","summary":"","title":"dns"},{"content":"","date":"November 29 2022","permalink":"/tags/domain/","section":"Tags","summary":"","title":"domain"},{"content":"","date":"November 29 2022","permalink":"/tags/file-share/","section":"Tags","summary":"","title":"file share"},{"content":"","date":"November 29 2022","permalink":"/tags/folders/","section":"Tags","summary":"","title":"folders"},{"content":"","date":"November 29 2022","permalink":"/tags/hass/","section":"Tags","summary":"","title":"hass"},{"content":"","date":"November 29 2022","permalink":"/tags/heimdall/","section":"Tags","summary":"","title":"Heimdall"},{"content":" Coming soon\n","date":"November 29 2022","permalink":"/apps/heimdall/","section":"Apps","summary":"Coming soon","title":"Heimdall"},{"content":"","date":"November 29 2022","permalink":"/tags/home-assistant/","section":"Tags","summary":"","title":"home assistant"},{"content":"Details\u003e Details # This is a template to add this container to your nas setup full functional with matching permissions and settings that of lochnas repo.\nOriginal maintainer homeassistant/home-assistant\nHow to enable\u003e How to enable # Add the domain ssl replacing domain.com with the root domain you entered in your config.yml\n/lochnas/server.bin -domain add hass.{domain.com} Edit your /lochnas/docker-templates/homeassistant/.env file and enable this container with HOMEASSISTANT_ENABLED=true. Run service lochnas restart and navigate in a browser to configure nextcloud at hass.domain.com. This should be pretty straight forward.\nAdding dongle to container\u003e Adding dongle to container # To add a zigbee/zwave dongle to the container, you need to add the device path to your .env file:\nExample:\nGLOBAL_DEVICE_0=/dev/ttyUSB0 GLOBAL_DEVICE_1=/dev/ttyUSB1 GLOBAL_DEVICE_2=/dev/null GLOBAL_DEVICE_3=/dev/null ","date":"November 29 2022","permalink":"/apps/homeassistant/","section":"Apps","summary":"Details\u003e Details # This is a template to add this container to your nas setup full functional with matching permissions and settings that of lochnas repo.\nOriginal maintainer homeassistant/home-assistant\nHow to enable\u003e How to enable # Add the domain ssl replacing domain.","title":"Home Assistant"},{"content":"","date":"November 29 2022","permalink":"/tags/honeygain/","section":"Tags","summary":"","title":"honeygain"},{"content":"Details\u003e Details # Details\u003e Details # This is a template to add this container to your nas setup full functional with matching permissions and settings that of lochnas repo.\nOriginal maintainer itzg/minecraft-server\nHow to enable\u003e How to enable # Edit your /lochnas/docker-templates/honeygain/.env file and enable this container with MINECRAFT_ENABLED=true\n","date":"November 29 2022","permalink":"/apps/honeygain/","section":"Apps","summary":"Details\u003e Details # Details\u003e Details # This is a template to add this container to your nas setup full functional with matching permissions and settings that of lochnas repo.\nOriginal maintainer itzg/minecraft-server","title":"Honeygain"},{"content":"See folder tree in table of contents\n/lochnas/\u003e /lochnas/ # Path to the root of the lochnas folder. This should live in the root folder of the server. We no longer support dynamic paths so that the containers can refference the same root paths internally and reduce user confusion.\nFiles:\nconfig.yml - This contains server configuration. server.bin - Lochnas server binary for Linux home/\u003e home/ # User data storage path. Also excluded from git. This directory is where apps like nextcloud and plex access stored data. You can mount additional disks and raid partitions to this folder. Example: /lochnas/home/4TB_HDD/\ndocker-data/\u003e docker-data/ # This is where apps store any persistent data. The subdirectory is the app name. This folder is excluded from git.\ndocker-templates/\u003e docker-templates/ # This is where apps store their templates. The subdirectory is the app name. This folder is excluded from git. Files belonging to an app:\ndocker-templates/ ├── app_name/ │ ├── docker-compose.yml (required) │ ├── nginx.conf (optional) │ ├── .env.example (required) │ ├── after-start.sh (optional) │ ├── before-start.sh (optional) │ └── readme.md (required) docker-compose.yml\u003e docker-compose.yml # Required. This is the docker-compose.yml file for the app. The app should mount volumes based on the file structure and store persistent data in the docker-data folder. You can look at this simple version or a more complicated custom image of the docker-compose.yml file.\nnginx.conf\u003e nginx.conf # Optional. This is the nginx configuration file for the app. When using this you must use the ${GLOBAL_DOMAIN} variable in the nginx.conf file along with a subdomain for the app. A basic example of one would be the homeassistant nginx config file. Although every app has its own way it needs to be proxied.\n.env.example\u003e .env.example # Required. This is the .env file for the app. It should be called from the docker-compose.yml file. It must have a boolean variable called APPNAME_ENABLED that is set to false by default. Only add required variables for the app to work and provide a link to documentation for more variables. Required static variables such as port and hostname configs should be set in the docker-compose.yml file instead. Variables that start with \u0026ldquo;GLOBAL_\u0026rdquo; are loaded into host os for use in docker-compose.yml (Eg: Homeassistant).\nafter-start.sh\u003e after-start.sh # Optional. This is a bash script that is run after the app is started. This is useful for settings up non persistent commands to run withouth modifying the original container. Such as a maintenance script.\nbefore-start.sh\u003e before-start.sh # Optional. This is a bash script that is run before the app is started but after any port/domain checks. This is useful for settings up non persistent commands to run withouth modifying the original container. Such as a maintenance script.\nreadme.md\u003e readme.md # Requred. This is a markdown file that links to the lochnas.com app page.\nserver/\u003e server/ # The source folder for the lochnas server daemon.\n","date":"November 29 2022","permalink":"/docs/folder-structure/","section":"Docs","summary":"See folder tree in table of contents\n/lochnas/\u003e /lochnas/ # Path to the root of the lochnas folder. This should live in the root folder of the server. We no longer support dynamic paths so that the containers can refference the same root paths internally and reduce user confusion.","title":"LochNAS Folder Structure"},{"content":"","date":"November 29 2022","permalink":"/tags/minecraft/","section":"Tags","summary":"","title":"minecraft"},{"content":"Details\u003e Details # This is a template to add this container to your nas setup full functional with matching permissions and settings that of lochnas repo.\nOriginal maintainer itzg/minecraft-server\nHow to enable\u003e How to enable # Edit your /lochnas/docker-templates/minecraft/.env file and enable this container with MINECRAFT_ENABLED=true\nJoining the game\u003e Joining the game # You can connect with your domain name or IP address. For example cloud.example.com would still work\nFor xbox/switch you will need to add a dns setting to be able to connect to the server. You can follow this guide.\n","date":"November 29 2022","permalink":"/apps/minecraft/","section":"Apps","summary":"Details\u003e Details # This is a template to add this container to your nas setup full functional with matching permissions and settings that of lochnas repo.\nOriginal maintainer itzg/minecraft-server\nHow to enable\u003e How to enable # Edit your /lochnas/docker-templates/minecraft/.","title":"Minecraft"},{"content":"Details\u003e Details # This is a template to add this container to your nas setup full functional with matching permissions and settings that of lochnas repo.\nOriginal maintainer itzg/minecraft-bedrock-server\nHow to enable\u003e How to enable # Edit your /lochnas/docker-templates/minecraft-bedrock/.env file and enable this container with MINECRAFT_BEDROCK_ENABLED=true\n","date":"November 29 2022","permalink":"/apps/minecraft-bedrock/","section":"Apps","summary":"Details\u003e Details # This is a template to add this container to your nas setup full functional with matching permissions and settings that of lochnas repo.\nOriginal maintainer itzg/minecraft-bedrock-server\nHow to enable\u003e How to enable # Edit your /lochnas/docker-templates/minecraft-bedrock/.","title":"Minecraft Bedrock"},{"content":"","date":"November 29 2022","permalink":"/tags/movies/","section":"Tags","summary":"","title":"movies"},{"content":"","date":"November 29 2022","permalink":"/tags/mysql/","section":"Tags","summary":"","title":"mysql"},{"content":"LochNAS is based on Docker Compose. You can add your own Docker images and have them run on startup.\nThis guide assumes that you know how to use Docker Compose (docker-compose.yml files) and that you have a Docker image in mind. My imaginary example is MyCoolApp which is (not actually) hosted on Dockerhub https://hub.docker.com/r/silocitylabs/mycoolapp\nDocker\u003e Docker # To add a new application to LochNAS, create a new directory under /lochnas/docker-templates/ like /lochnas/docker-templates/mycoolapp.\nIn that directory create the files docker-compose.yml, .env, and .example.env\nWrite docker-compose.yml for the image that you want to run. Read the documentation on Docker Hub for your image. Ensure the Docker names are unique and don\u0026rsquo;t interfere with LochNAS image names. If it uses volumes, map them to /lochnas/docker-data/mycoolapp\nHere is a barebones docker-compose.yml\nservices: mycoolapp: container_name: mycoolapp image: silocitylabs/mycoolapp:latest restart: unless-stopped volumes: - \u0026#39;/etc/localtime:/etc/localtime:ro\u0026#39; - \u0026#39;/etc/timezone:/etc/timezone:ro\u0026#39; - `/lochnas/dock-data/mycoolapp:/opt/mycoolapp/cool-stuff-output` env_file: - /lochnas/docker-templates/mycoolapp/.env networks: - backend The .env file should contain MYCOOLAPP_ENABLED=true. That name needs to match the directory name. When the variable is true, LochNAS will start this docker-compose.yml. The rest of .env can be filled with your application\u0026rsquo;s environment viarables.\nCopy .env to .example.env. Remove any passwords, API keys, etc, so that you can share the example file.\nNginx\u003e Nginx # Use Nginx to access the image with a subdomain, like mycoolapp.domain.com. This part of the guide assumes that you already set up a domain and DDNS.\nFirst ensure that Nginx is enabled by editing /lochnas/docker-templates/nginx/.env and setting NGINX_ENABLED=true. Check the Nginx docs\nCreate a file nginx.conf in /lochnas/docker-templates/mycoolapp. You must write you configuration file from here. You may use ${GLOBAL_DOMAIN} to reference the domain set in /lochnas/config.yml\nserver { listen 443 ssl http2; server_name mycoolapp.${GLOBAL_DOMAIN}; Finally run /lochnas/server.bin -domain add mycoolapp.domain.com\n","date":"November 29 2022","permalink":"/docs/new-docker-app/","section":"Docs","summary":"LochNAS is based on Docker Compose. You can add your own Docker images and have them run on startup.\nThis guide assumes that you know how to use Docker Compose (docker-compose.","title":"New Docker app"},{"content":"We renamed from Docker-NAS to avoid any copyright issues with docker. Thanks to the previous owner of LochNAS we were able to grab lochnas.com to start fresh.\nWe renamed the project repos which requires you to move your install from /docker-nas to /lochnas.\nWe created this beautiful site thanks to a theme called blowfish and some logo design by our friends on fiverr.\nOur development has moved into the cloud for accellerated growth and we dont have to work on our own installs.\nWe have many plans for the future shown on our github issues list and hope you can join us for the ride.\n~ The LochNAS Team\n","date":"November 29 2022","permalink":"/posts/welcome/","section":"Posts","summary":"We renamed from Docker-NAS to avoid any copyright issues with docker. Thanks to the previous owner of LochNAS we were able to grab lochnas.com to start fresh.\nWe renamed the project repos which requires you to move your install from /docker-nas to /lochnas.","title":"New name, New website"},{"content":"","date":"November 29 2022","permalink":"/tags/nextcloud/","section":"Tags","summary":"","title":"nextcloud"},{"content":"Details\u003e Details # This is a template to add this container to your nas setup full functional with matching permissions and settings that of lochnas repo. If you havent already done so you must enable nginx container first.\nOriginal maintainer Nextcloud, mariadb\nHow to enable\u003e How to enable # Add the domain ssl replacing domain.com with the root domain you entered in your config.yml\n/lochnas/server.bin -domain add cloud.{domain.com} Edit your /lochnas/docker-templates/nextcloud/.env file and enable this container then run service lochnas restart\nNEXTCLOUD_ENABLED=false NEXTCLOUD_DATA=/lochnas/home MYSQL_ROOT_PASSWORD=password MYSQL_PASSWORD=password Setup nextcloud\u003e Setup nextcloud # Navigate in a browser to configure nextcloud at cloud.domain.com\nFirst enter a personal username and password to login to nextcloud. Then before hitting next hit the advanced option.\nClick MySQL / MariaDB Leave data path default Database User: nextcloud Database Password: password from .env MYSQL_PASSWORD= Database Name: nextcloud Change localhost to mariadb:3306 Click Next Note: If you get the error 504 Gateway timeout, edit the file docker-data/nextcloud/html/config/config.php and remove :3306 from dbhost and add it to dbport as 3306. This is an unfortunate bug in the nextcloud installer but shouldnt be an issue past this.\nAfter you get to the welcome screen go to settings -\u0026gt; basic settings. Change the cron settings to webcron.\nGo to apps and disable the app called Deleted Files. This application causes issues with External Storage plugin.\nGo to External storage in settings and create a storage under /raid for your users.\nYou will need to make some tweaks to improve this nextcloud docker setup. Type the following commands:\ndocker exec -u www-data -it nextcloud ./occ db:add-missing-indices docker exec -u www-data -it nextcloud ./occ db:convert-filecache-bigint docker exec -u www-data -it nextcloud ./occ config:app:set text workspace_available --value=0 Make one last addition to the config file to fix a login redirect issue.\nnano docker-data/nextcloud/html/config/config.php\n\u0026#39;overwrite.cli.url\u0026#39; =\u0026gt; \u0026#39;https://cloud.yourdomain.com\u0026#39;, \u0026#39;overwritehost\u0026#39; =\u0026gt; \u0026#39;cloud.yourdomain.com\u0026#39;, \u0026#39;overwriteprotocol\u0026#39; =\u0026gt; \u0026#39;https\u0026#39;, Stuck in Maintenance mode\u003e Stuck in Maintenance mode # Sometimes Nextcloud finds itself stuck unable to update due to an issue. You can run the command to determine why its stuck.\ndocker exec -it -u 33 nextcloud php occ upgrade If you see an error like \u0026ldquo;Cannot skip major versions\u0026rdquo;. You will need to download the previous version and upgrade incrimentally. The following example goes from 23 -\u0026gt; 24. You will need to repeat this for multiple major versions.\ncd /lochnas/docker-data/nextcloud cat html/config/config.php | grep version mv html nextcloud wget https://download.nextcloud.com/server/releases/nextcloud-24.0.0.zip unzip -o nextcloud-24.0.0.zip mv nextcloud html docker exec -it -u 33 nextcloud php occ upgrade ","date":"November 29 2022","permalink":"/apps/nextcloud/","section":"Apps","summary":"Details\u003e Details # This is a template to add this container to your nas setup full functional with matching permissions and settings that of lochnas repo. If you havent already done so you must enable nginx container first.","title":"Nextcloud"},{"content":"","date":"November 29 2022","permalink":"/tags/nzbget/","section":"Tags","summary":"","title":"nzbget"},{"content":" Coming soon\n","date":"November 29 2022","permalink":"/apps/nzbget/","section":"Apps","summary":"Coming soon","title":"NZBGet"},{"content":"","date":"November 29 2022","permalink":"/tags/office/","section":"Tags","summary":"","title":"office"},{"content":"","date":"November 29 2022","permalink":"/tags/paths/","section":"Tags","summary":"","title":"paths"},{"content":"","date":"November 29 2022","permalink":"/tags/phpmyadmin/","section":"Tags","summary":"","title":"phpmyadmin"},{"content":"Details\u003e Details # This is a template to add this container to your nas setup full functional with matching permissions and settings that of lochnas repo.\nOriginal maintainer phpmyadmin/phpmyadmin\nHow to enable\u003e How to enable # Add the domain ssl replacing domain.com with the root domain you entered in your config.yml\n/lochnas/server.bin -domain add phpmyadmin.{domain.com} Edit your /lochnas/docker-templates/phpmyadmin/.env file and enable this container with PHPMYADMIN_ENABLED=true\nHow to use\u003e How to use # Access your site via your browser at https://phpmyadmin.yourdomain.com\n","date":"November 29 2022","permalink":"/apps/phpmyadmin/","section":"Apps","summary":"Details\u003e Details # This is a template to add this container to your nas setup full functional with matching permissions and settings that of lochnas repo.\nOriginal maintainer phpmyadmin/phpmyadmin\nHow to enable\u003e How to enable # Add the domain ssl replacing domain.","title":"PHPmyAdmin"},{"content":"","date":"November 29 2022","permalink":"/tags/plex/","section":"Tags","summary":"","title":"plex"},{"content":"Details\u003e Details # This is a template to add this container to your nas setup full functional with matching permissions and settings that of lochnas repo.\nOriginal maintainer plexinc/pms-docker\nHow to enable\u003e How to enable # Edit your /lochnas/docker-templates/plex/.env file and enable this container with PLEX_ENABLED=true\nGo to https://www.plex.tv/claim/ to grab your claim code to be used for the command below.\nENter your token into .env variable PLEX_CLAIM\nHead over to your browser and type http://serverip:32400/web and if you have a response you should be all set. Finalize it by pressing Ctrl + C\nYou can comment or remove the PLEX_CLAIM variable now.\nAdditional Configuration\u003e Additional Configuration # PLEX_DATA=/lochnas/home/plex - Path to plex media directory mounted inside plex as /lochnas/home\n","date":"November 29 2022","permalink":"/apps/plex/","section":"Apps","summary":"Details\u003e Details # This is a template to add this container to your nas setup full functional with matching permissions and settings that of lochnas repo.\nOriginal maintainer plexinc/pms-docker\nHow to enable\u003e How to enable # Edit your /lochnas/docker-templates/plex/.","title":"Plex"},{"content":"","date":"November 29 2022","permalink":"/tags/portainer/","section":"Tags","summary":"","title":"portainer"},{"content":"Details\u003e Details # This is a template to add this container to your nas setup full functional with matching permissions and settings that of lochnas repo.\nOriginal maintainer portainer/portainer-ce\nHow to enable\u003e How to enable # Edit your /lochnas/docker-templates/portainer/.env file and enable this container with PORTAINER_ENABLED=true\nAfter running service lochnas restart navigate in a browser to configure at portainer.domain.com. Create a username and password, then select local docker and hit next. You should be complete.\n","date":"November 29 2022","permalink":"/apps/portainer/","section":"Apps","summary":"Details\u003e Details # This is a template to add this container to your nas setup full functional with matching permissions and settings that of lochnas repo.\nOriginal maintainer portainer/portainer-ce\nHow to enable\u003e How to enable # Edit your /lochnas/docker-templates/portainer/.","title":"Portainer"},{"content":"","date":"November 29 2022","permalink":"/tags/prowlarr/","section":"Tags","summary":"","title":"prowlarr"},{"content":"Details\u003e Details # This is a template to add this container to your nas setup full functional with matching permissions and settings that of lochnas repo. This assumes you are using plex and transmission paths.\nHow to enable\u003e How to enable # Add the domain ssl replacing domain.com with the root domain you entered in your config.yml\n/lochnas/server.bin -domain add prowlarr.{domain.com} Edit your /lochnas/docker-templates/prowlarr/.env file and enable this container with PROWLARR_ENABLED=true and other variables. You can access it via https://prowlarr.yourdomain.com\nTo use web access you must have nginx auth password set\nEnable Download clients\u003e Enable Download clients # Settings -\u0026gt; Download Clients -\u0026gt; Add + -\u0026gt; Transmission\nName: Transmission Enable: Checked Host: transmission.domain.com Port: 443 Use SSL: Checked Username: \u0026lt;transmission username\u0026gt; Password: \u0026lt;transmission password\u0026gt; Category: prowlarr Click test, then Save\nEnable Indexers\u003e Enable Indexers # Indexers -\u0026gt; Add New Indexer\nSelect the indexer your want to enable and configure\n","date":"November 29 2022","permalink":"/apps/prowlarr/","section":"Apps","summary":"Details\u003e Details # This is a template to add this container to your nas setup full functional with matching permissions and settings that of lochnas repo. This assumes you are using plex and transmission paths.","title":"Prowlarr"},{"content":"","date":"November 29 2022","permalink":"/tags/radarr/","section":"Tags","summary":"","title":"radarr"},{"content":"Details\u003e Details # This is a template to add this container to your nas setup full functional with matching permissions and settings that of lochnas repo. This assumes you are using plex and transmission paths.\nHow to enable\u003e How to enable # Add the domain ssl replacing domain.com with the root domain you entered in your config.yml\n/lochnas/server.bin -domain add radarr.{domain.com} Edit your /lochnas/docker-templates/radarr/.env file and enable this container with RADARR_ENABLED=true and other variables. You can access it via https://radarr.yourdomain.com\nTo use web access you must have nginx auth password set\nAdditional Configuration\u003e Additional Configuration # Enable root folder\u003e Enable root folder # Settings -\u0026gt; Media Management -\u0026gt; Root Folders -\u0026gt; Add Root Folder -\u0026gt; /lochnas/home/path/to/Movies\nEnable Download clients\u003e Enable Download clients # Settings -\u0026gt; Download Clients -\u0026gt; Add + -\u0026gt; Transmission\nName: Transmission Enable: Checked Host: transmission.domain.com Port: 443 Use SSL: Checked Username: \u0026lt;transmission username\u0026gt; Password: \u0026lt;transmission password\u0026gt; Category: radarr Click test, then Save\nEnable Indexers\u003e Enable Indexers # Settings -\u0026gt; Indexers -\u0026gt; Add +\nSelect the indexer your want to enable and configure\n","date":"November 29 2022","permalink":"/apps/radarr/","section":"Apps","summary":"Details\u003e Details # This is a template to add this container to your nas setup full functional with matching permissions and settings that of lochnas repo. This assumes you are using plex and transmission paths.","title":"Radarr"},{"content":"","date":"November 29 2022","permalink":"/tags/raid/","section":"Tags","summary":"","title":"raid"},{"content":"For ldrrp\u0026rsquo;s setup he followed an online guide by DigitalOcean to setup raid. He has a RAID 5 mounted to /lochnas and another raid 5 mounted to /lochnas/home/plex\nMaave also set up RAID 5 but had issues with the DigitalOcean guide - he needed to use partitions for RAID to persist. Here are the command examples. His RAID drives are A B and D.\nUse a disk utility to create partitions and mark the drive for RAID auto-detect. Partition type fd00 is the magic hex code for RAID auto-detect\n# make a GPT partition and mark as RAID. # Check partitions (\u0026#39;p\u0026#39; command) before writing (\u0026#39;w\u0026#39; command) # Repeat for each RAID drive. gdisk /dev/sda n {enter} {enter} {enter} fd00 p w y Then you can create the RAID array\n# create the raid array, using parition #1 that I just created with gdisk mdadm --create --verbose /dev/md0 --level=5 --raid-devices=3 /dev/sda1 /dev/sdb1 /dev/sdd1 cat /proc/mdstat #repeat this command and wait for 100%. It may take hours. # verify the RAID array # /dev/md0 (or whatever) should exist mdadm --detail --scan # save array. Check your location of \u0026#34;mdadm.conf\u0026#34; for your Linux distro mdadm --detail --scan \u0026gt;\u0026gt; /etc/mdadm/mdadm.conf update-initramfs -u Now you can make a partition on and use it\n# make partition mkfs.ext4 -F /dev/md0 # mount this manually if you want to check it Mount partition\u003e Mount partition # This will work with any existing raid for a migration as well. Locate your RAID with mdadm --detail --scan and appemd the lines to /etc/mdadm/mdadm.conf like the instructions above.\nSet the partition to mount on boot. Use nano or vi to add the following line to /etc/fstab\nnano /etc/fstab /dev/md0 /lochnas/home ext4 defaults,nofail,discard 0 0 Make your LochNAS home directory and mount\nmkdir -p /lochnas/home mount -a # verify df -h -x devtmpfs -x tmpfs ","date":"November 29 2022","permalink":"/docs/raid/","section":"Docs","summary":"For ldrrp\u0026rsquo;s setup he followed an online guide by DigitalOcean to setup raid. He has a RAID 5 mounted to /lochnas and another raid 5 mounted to /lochnas/home/plex\nMaave also set up RAID 5 but had issues with the DigitalOcean guide - he needed to use partitions for RAID to persist.","title":"RAID setup"},{"content":"","date":"November 29 2022","permalink":"/tags/residential-isp/","section":"Tags","summary":"","title":"residential isp"},{"content":"","date":"November 29 2022","permalink":"/tags/samba/","section":"Tags","summary":"","title":"samba"},{"content":"Details\u003e Details # This is a template to add this container to your nas setup full functional with matching permissions and settings that of lochnas repo.\nHow to enable\u003e How to enable # Edit your /lochnas/docker-templates/samba/.env file and enable this container with SAMBA_ENABLED=true\nCreate a usermap for windows file share to login, This is the linux username and linux user id on your host machine. You can get your user id with the id -u username command.\nSAMBA_USERMAP=username:1001:password,username:1002:password Additional Configuration\u003e Additional Configuration # On first run it will create a default smb.conf from the templates directory. Afterwards you can edit docker-data/samba/smb.conf and change the paths, you can add as many shares as you would like.\nMounting SMB on remote machines\u003e Mounting SMB on remote machines # This will not work outside of your network as the port is not forwarded. I recommend using a vpn server like the one built into Asus routers. Not recommended to port forward SMB in any scenario.\nUbuntu - https://askubuntu.com/questions/157128/proper-fstab-entry-to-mount-a-samba-share-on-boot\nOSX - https://www.imore.com/how-automatically-mount-network-drives-macos\nWindows - https://www.techrepublic.com/article/how-to-connect-to-linux-samba-shares-from-windows-10/\nAndroid - https://play.google.com/store/apps/details?id=pl.solidexplorer2\n","date":"November 29 2022","permalink":"/apps/samba/","section":"Apps","summary":"Details\u003e Details # This is a template to add this container to your nas setup full functional with matching permissions and settings that of lochnas repo.\nHow to enable\u003e How to enable # Edit your /lochnas/docker-templates/samba/.","title":"Samba Windows File Share"},{"content":"","date":"November 29 2022","permalink":"/tags/server/","section":"Tags","summary":"","title":"server"},{"content":"","date":"November 29 2022","permalink":"/tags/sonarr/","section":"Tags","summary":"","title":"sonarr"},{"content":"Details\u003e Details # This is a template to add this container to your nas setup full functional with matching permissions and settings that of lochnas repo. This assumes you are using plex and transmission paths.\nHow to enable\u003e How to enable # Add the domain ssl replacing domain.com with the root domain you entered in your config.yml\n/lochnas/server.bin -domain add sonarr.{domain.com} Edit your /lochnas/docker-templates/sonarr/.env file and enable this container with SONARR_ENABLED=true and other variables. You can access it via https://sonarr.yourdomain.com\nTo use web access you must have nginx auth password set\nAdditional Configuration\u003e Additional Configuration # Enable root folder\u003e Enable root folder # Settings -\u0026gt; Media Management -\u0026gt; Root Folders -\u0026gt; Add Root Folder -\u0026gt; /lochnas/home/path/to/TV\nEnable Download clients\u003e Enable Download clients # Settings -\u0026gt; Download Clients -\u0026gt; Add + -\u0026gt; Transmission\nName: Transmission Enable: Checked Host: transmission.domain.com Port: 443 Use SSL: Checked Username: \u0026lt;transmission username\u0026gt; Password: \u0026lt;transmission password\u0026gt; Category: sonarr Click test, then Save\nEnable Indexers\u003e Enable Indexers # Settings -\u0026gt; Indexers -\u0026gt; Add +\nSelect the indexer your want to enable and configure\n","date":"November 29 2022","permalink":"/apps/sonarr/","section":"Apps","summary":"Details\u003e Details # This is a template to add this container to your nas setup full functional with matching permissions and settings that of lochnas repo. This assumes you are using plex and transmission paths.","title":"Sonarr"},{"content":"","date":"November 29 2022","permalink":"/tags/transmission/","section":"Tags","summary":"","title":"transmission"},{"content":"Details\u003e Details # This is a template to add this container to your nas setup full functional with matching permissions and settings that of lochnas repo.\nOriginal maintainer haugene/transmission-openvpn\nHow to enable\u003e How to enable # Add the domain ssl replacing domain.com with the root domain you entered in your config.yml\n/lochnas/server.bin -domain add transmission.{domain.com} Edit your /lochnas/docker-templates/transmission/.env file and enable this container with TRANSMISSION_ENABLED=true and other variables. You can access it via https://transmission.yourdomain.com/web/\nThe other variables are required with this vpn only transmission container.\nCustom Transmission RSS\u003e Custom Transmission RSS # Inside portainer you can add your own rss feeds by making a new container like so\nrss: image: haugene/transmission-rss links: - transmission environment: - RSS_URL=http://.../xxxxx.rss Alternatively we recommend you look at sonarr and radarr apps for a better way to add rss feeds.\n","date":"November 29 2022","permalink":"/apps/transmission/","section":"Apps","summary":"Details\u003e Details # This is a template to add this container to your nas setup full functional with matching permissions and settings that of lochnas repo.\nOriginal maintainer haugene/transmission-openvpn\nHow to enable\u003e How to enable # Add the domain ssl replacing domain.","title":"Transmission"},{"content":"","date":"November 29 2022","permalink":"/tags/tv/","section":"Tags","summary":"","title":"tv"},{"content":"","date":"November 29 2022","permalink":"/tags/usenet/","section":"Tags","summary":"","title":"usenet"},{"content":"Requirements\u003e Requirements # OSX is unknown and untested root access Port forwarding 80 + 443 Static IP on Server, alternative is DHCP reservation on router. xcode git Docker Desktop Install\u003e Install # This is untested as of right now, See issue #44 for more information. You can manually install docker desktop and run /lochnas/server.bin -daemon install. You will need to manually compile this for osx.\nUpdates\u003e Updates # LochNAS uses git to update. You can configure your update schedule via the config.yml file.\n","date":"November 20 2022","permalink":"/docs/install-osx/","section":"Docs","summary":"Requirements\u003e Requirements # OSX is unknown and untested root access Port forwarding 80 + 443 Static IP on Server, alternative is DHCP reservation on router. xcode git Docker Desktop Install\u003e Install # This is untested as of right now, See issue #44 for more information.","title":"LochNAS Setup OSX"},{"content":"Requirements\u003e Requirements # Windows is unknown and untested root access Port forwarding 80 + 443 Static IP on Server, alternative is DHCP reservation on router. git Docker Desktop Install\u003e Install # This is untested as of right now, See issue #44 for more information. You can manually install docker desktop and run C:\\lochnas\\server.exe -daemon install. You will need to manually compile this for Windows.\nUpdates\u003e Updates # LochNAS uses git to update. You can configure your update schedule via the config.yml file.\n","date":"November 20 2022","permalink":"/docs/install-windows/","section":"Docs","summary":"Requirements\u003e Requirements # Windows is unknown and untested root access Port forwarding 80 + 443 Static IP on Server, alternative is DHCP reservation on router. git Docker Desktop Install\u003e Install # This is untested as of right now, See issue #44 for more information.","title":"LochNAS Setup Windows"},{"content":"","date":"November 20 2022","permalink":"/tags/osx/","section":"Tags","summary":"","title":"osx"},{"content":"","date":"November 20 2022","permalink":"/tags/windows/","section":"Tags","summary":"","title":"windows"},{"content":"","date":"June 13 2022","permalink":"/posts/","section":"Posts","summary":"","title":"Posts"},{"content":"advanced tag\n","date":"January 1 0001","permalink":"/tags/advanced/","section":"Tags","summary":"advanced tag","title":"advanced"},{"content":"","date":"January 1 0001","permalink":"/authors/","section":"Authors","summary":"","title":"Authors"},{"content":"","date":"January 1 0001","permalink":"/categories/","section":"Categories","summary":"","title":"Categories"},{"content":"","date":"January 1 0001","permalink":"/series/","section":"Series","summary":"","title":"Series"}]